<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Setting up a Pelican blog using Dropbox and Github Pages</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Rishabh's blog </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/devnotes.html">devnotes</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/pelica-dropbox-github-blog.html" rel="bookmark"
           title="Permalink to Setting up a Pelican blog using Dropbox and Github Pages">Setting up a Pelican blog using Dropbox and Github Pages</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-30T08:30:00-07:00">
                Published: Sun 30 March 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/rishabh-manocha.html">Rishabh Manocha</a>
        </address>
<p>In <a href="/category/devnotes.html">devnotes</a>.</p>
<p>tags: <a href="/tag/pelican.html">pelican</a> <a href="/tag/github.html">github</a> </p>
</footer><!-- /.post-info -->      <p>I just wanted to walk through how I set this blog up - both as a <em>How to</em> for others and for posterity. If it isn't obvious yet, this blog is powered by <a href="http://blog.getpelican.com/">Pelican</a> (the version I'm using as of this writing in 3.3) and is hosted on <a href="http://pages.github.com/">Github pages</a>. What isn't obvious yet is that, in the background, <a href="http://dropbox.com">Dropbox</a> is helping out too.</p>
<p>So the structure I ended up following was to create a new folder in my Dropbox folder - I called it <code>gh-blog</code>. Once in this folder, I follow the following steps:</p>
<div class="highlight"><pre><span></span>sudo pip install virtualenv virtualenvwrapper 
// setup virtualenvwrapper
mkvirtualenv --no-site-packages gh-blog
pip install pelican Fabric
<span class="nb">cd</span> ~/Dropbox/gh-blog
pelican-quickstart // I mostly followed the defaults
</pre></div>


<p>After this, I had a 'base' pelican blog setup. I tried running <code>fab build</code> followed by <code>fab serve</code> and going to <a href="http://localhost:8000">http://localhost:8000</a> but as expected, no blog posts were shown.</p>
<p>At this stage, I logged into github and created my public repository matching my username (rmanocha.github.com). Once this was done, I cloned this repository inside the <code>gh-blog</code> folder:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/Dropbox/gh-blog
git clone git@github.com:rmanocha/rmanocha.github.com.git
</pre></div>


<p>Finally, I updated the fabfile (<code>fabfile.py</code>) to make the newly cloned folder the output folder (this is required since the output folder is where all the HTML and CSS generated by pelican is stored; and this is what is required by github to render your blog). My final fabfile.py looks like:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fabric.api</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">fabric.contrib.project</span> <span class="kn">as</span> <span class="nn">project</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Local path configuration (can be absolute or relative to fabfile)</span>
<span class="n">env</span><span class="o">.</span><span class="n">deploy_path</span> <span class="o">=</span> <span class="s1">&#39;rmanocha.github.com&#39;</span>
<span class="n">DEPLOY_PATH</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">deploy_path</span>
<span class="n">GITHUB_REPO</span> <span class="o">=</span> <span class="s1">&#39;git@github.com:rmanocha/rmanocha.github.com.git&#39;</span>


<span class="k">def</span> <span class="nf">clean</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">DEPLOY_PATH</span><span class="p">):</span>
        <span class="n">local</span><span class="p">(</span><span class="s1">&#39;rm -rf {deploy_path}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>
        <span class="n">local</span><span class="p">(</span><span class="s1">&#39;git clone </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">GITHUB_REPO</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">build</span><span class="p">():</span>
    <span class="n">local</span><span class="p">(</span><span class="s1">&#39;pelican -s pelicanconf.py -o {deploy_path} content&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">rebuild</span><span class="p">():</span>
    <span class="n">clean</span><span class="p">()</span>
    <span class="n">build</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">regenerate</span><span class="p">():</span>
    <span class="n">local</span><span class="p">(</span><span class="s1">&#39;pelican -r -s pelicanconf.py&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">serve</span><span class="p">():</span>
    <span class="n">local</span><span class="p">(</span><span class="s1">&#39;cd {deploy_path} &amp;&amp; python -m SimpleHTTPServer&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">reserve</span><span class="p">():</span>
    <span class="n">build</span><span class="p">()</span>
    <span class="n">serve</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">preview</span><span class="p">():</span>
    <span class="n">local</span><span class="p">(</span><span class="s1">&#39;pelican -s publishconf.py&#39;</span><span class="p">)</span>
</pre></div>


<p>You will need to change the <code>env.deploy_path</code> and <code>GITHUB_REPO</code> variables above. I haven't yet cleaned up the <code>preview</code> and <code>regenerate</code> commands - I haven't really used them yet. As you will notice in the <code>build</code> command above, the 'content' we're going to generate is going to be stored in the <code>content</code> folder. So essentially, this is where all your blog posts will go.</p>
<p>After adding a new post within the <code>content</code> folder, I ran <code>fab rebuild</code> followed by a <code>fab serve</code>. Browsing to <a href="http://localhost:8000">http://localhost:8000</a> should now show you your new blog post. After making sure everything looked good, I just did the following:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/Dropbox/gh-blog/rmanocha.github.com
git add .
git commit -av -m <span class="s2">&quot;first blog post&quot;</span>
git push
</pre></div>


<p>Tada. I was now able to browse to <a href="http://rmanocha.github.io">http://rmanocha.github.io</a> and see my freshly minted blog post.</p>
<p>This setup allowed me to store my raw, markdown formatted blog posts somewhere (I didn't want to pay for a github repository) that was backed up and (sort of) version controlled while still publishing the blog posts I wanted to, to github. So far, things seem to be working smoothly.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="http://twitter.com/rmanocha">@rmanocha</a></li>
                            <li><a href="http://github.com/rmanocha">Github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>