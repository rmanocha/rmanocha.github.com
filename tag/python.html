<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Rishabh's musings - python</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Rishabh's musings </a></h1>
                <nav><ul>
                    <li><a href="/category/devnotes.html">devnotes</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/rpi-ios-home-automation.html">Experiments with RaspberryPi and iOS for home automation</a></h1>
<footer class="post-info">
        <abbr class="published" title="2015-11-22T08:00:00">
                Sun 22 November 2015
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/rishabh-manocha.html">Rishabh Manocha</a>
        </address>
<p>In <a href="/category/devnotes.html">devnotes</a>. </p>
<p>tags: <a href="/tag/raspberrypi.html">raspberrypi</a><a href="/tag/ios.html">ios</a><a href="/tag/python.html">python</a></p>
</footer><!-- /.post-info --><p>Ever since I bought a couple of RaspberryPi's a year or so ago, I've been interested in doing some home automation with them. However, 
I never really got down to it (for various reasons; lazy, no easy tutorial available, parts missing, life etc.) until the past couple 
of months or so.</p>
<p>I finally got around to buying a <a href="http://www.amazon.com/gp/product/B00C8O9KHA">relay</a> and 
<a href="http://www.amazon.com/gp/product/B00M5WLZDW">female to female cables</a>. With these in hand, I followed a few tutorials on YouTube
to get a light setup to be controlled by the GPIO pins and the relay (<a href="https://www.youtube.com/watch?v=WpM1aq4B8-A">some</a> <a href="https://www.youtube.com/watch?v=oaf_zQcrg7g">good</a> <a href="https://www.youtube.com/watch?v=3u45htuQeag">videos</a>).
In the end, the whole setup ends up looking something like the below (I'll go into more detail about this setup in a later post perhaps):</p>
<p><img alt="RPI Setup" src="http://i.imgur.com/pt6aft9.jpg" /></p>
<p>With the wires all setup, the next step is to actual use the setup to be able to remotely turn on or off a light. This is where the <a href="https://github.com/rmanocha/rpi_lights/blob/master/flask_light.py">flask
app</a> I wrote comes in. As you might see, the GPIO pins being used are #9 and #2. 
These two represent the two ends of the relay board (in my setup anyways). Running this as a webserver on the raspberry pi (you need to run as root
otherwise the rpi is unable to access the GPIO pins) allows me to then make a simple GET request to <code>/toggle</code> for one light and <code>/toggle_big</code> for the other.</p>
<p>Now, while I had an Android device, hitting these endpoints was easy. I simply setup a Tasker widget on my home screen that when touched would make a GET request
to one of these two endpoints which would, in turn, simply toggle the light on or off. However, now that I use an iOS device, Tasker (or any other widgets) are not an option
anymore (which sucks, IMO). This was a good opportunity to get my feet wet in the iOS development world. There are a bazillion tutorials online on how to get started, so I won't
go into them here. I would say that making a simple GET request via swift turned out to be a harder task than I had envisioned it to be (though I guess, python, natively makes it just
as hard). At the end of the day, <a href="https://github.com/rmanocha/RPiLightApp/blob/master/RPiLight/ViewController.swift">this is what I came up with</a>. Essentially a viewport with two buttons; each
one simply toggles the specific light on or off. As you can see from the image below, I have not figured out how to center the buttons in the view; not such a big deal for me for now.</p>
<p><img alt="iOS App" src="http://i.imgur.com/8FQimr8.png" /></p>
<p>The next step for me is to get force touch working on my iPhone 6s so that the app does not need to open up for me to be able to turn the light on or off (similar to a widget on Android devices).
Additionally, I need to buy another relay board and a wireless dongle for the pi so that I can do the same thing for the lamps in my bedroom.</p>
<p>So that's mostly it. This setup works well for now and gave me a good opportunity to play around with a few new and interesting technologies/languages.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/opsworks-boto-jenkins-automation.html" rel="bookmark"
                           title="Permalink to Opsworks stack automation using Jenkins and AWS Boto">Opsworks stack automation using Jenkins and AWS Boto</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-07-30T08:00:00">
                Wed 30 July 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/rishabh-manocha.html">Rishabh Manocha</a>
        </address>
<p>In <a href="/category/devnotes.html">devnotes</a>. </p>
<p>tags: <a href="/tag/aws.html">aws</a><a href="/tag/python.html">python</a></p>
</footer><!-- /.post-info -->                <p>A python script that allows us to automate the creation of new instances within an Opsworks stack via a Jenkins job.</p>
                <a class="readmore" href="/opsworks-boto-jenkins-automation.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="http://twitter.com/rmanocha">@rmanocha</a></li>
                            <li><a href="http://github.com/rmanocha">Github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>